{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "ViewportController"
    },
    "designerId": "c65bc537-2034-4e57-af3c-fe7bf6d78381",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "#btnSearch",
                "designer|targetType": "Ext.button.Button",
                "fn": "onBtnSearchClick",
                "implHandler": [
                    "var seatchText = button.up('toolbar').down('#searchTextField').getValue();\r",
                    "console.log('Search Text: ' + seatchText);\r",
                    "var contentPanel = Ext.ComponentQuery.query('#contentpanelCenter')[0];\r",
                    "var containPanelGrid = contentPanel.getComponent(0);\r",
                    "var me = this;\r",
                    "//debugger;\r",
                    "var arrayMessageResult = new Array();\r",
                    "if(containPanelGrid.getXType() === 'mailgrid') {\r",
                    " //   console.log('mailgrid');\r",
                    "    var treeStore = Ext.getStore('MailTreeStore');\r",
                    "    \r",
                    "    treeStore.getRootNode().eachChild(function(currentNode){\r",
                    "  //      debugger;\r",
                    "       arrayMessageResult =  arrayMessageResult.concat(me.searchInMailStore(currentNode,seatchText));\r",
                    "        currentNode.children().each(function(fol) {\r",
                    "             arrayMessageResult =  arrayMessageResult.concat(me.searchInMailStore(fol,seatchText));\r",
                    "        });\r",
                    "    });\r",
                    "    var searchStore = Ext.getStore('MailStore');\r",
                    "    searchStore.loadData(arrayMessageResult, false);\r",
                    "    containPanelGrid.reconfigure(searchStore);\r",
                    "   // debugger;\r",
                    "\r",
                    "} else {\r",
                    "    //console.log('todogrid'); record.todos()\r",
                    "    var userStore = Ext.getStore('UserStore');\r",
                    "    userStore.each(function(record) {\r",
                    "         arrayMessageResult =  arrayMessageResult.concat(me.searchInTodoStore(record,seatchText));\r",
                    "    });\r",
                    "    var searchStore = Ext.getStore('TodoStore');\r",
                    "    searchStore.loadData(arrayMessageResult, false);\r",
                    "    containPanelGrid.reconfigure(searchStore);\r",
                    "}"
                ],
                "name": "click",
                "scope": "me"
            },
            "designerId": "e0d8e9af-57bc-4138-bff3-258c2fb00365"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "mailStore",
                    "keyword"
                ],
                "fn": "searchInMailStore",
                "implHandler": [
                    "var arrayMessage = new Array();\r",
                    "//debugger;\r",
                    "\r",
                    "mailStore.messages().each(function(mess) {\r",
                    "//    debugger;\r",
                    "    var searchIndex = mess.get('message').search(keyword);\r",
                    "    if(searchIndex != -1) {\r",
                    "        arrayMessage.push(mess);\r",
                    "    }\r",
                    "\r",
                    "});\r",
                    "return arrayMessage;"
                ]
            },
            "designerId": "21298a0c-fc87-47de-881c-2e34c14b9109"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "todoStore",
                    "keyword"
                ],
                "fn": "searchInTodoStore",
                "implHandler": [
                    "var arrayTodos = new Array();\r",
                    "//debugger;\r",
                    "\r",
                    "todoStore.todos().each(function(todo) {\r",
                    "//    debugger;\r",
                    "    var searchIndex = todo.get('notes').search(keyword);\r",
                    "    if(searchIndex != -1) {\r",
                    "        arrayTodos.push(todo);\r",
                    "    }\r",
                    "\r",
                    "});\r",
                    "return arrayTodos;"
                ]
            },
            "designerId": "393d649e-f026-4cca-9c0b-8ca970f21050"
        }
    ]
}